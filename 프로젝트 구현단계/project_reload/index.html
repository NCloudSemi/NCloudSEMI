<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인-회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="css/Header-Footer.css">
    <link rel="stylesheet" href="css/Header-Footer-Sidebar.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js" integrity="sha512-1wOa38HU7OHdLsMg1jV0J/NW7fygYhOq3MRGrXbJ6SzB5Zg3xfGafX8RkJJzChKwbj+Y1/wLkfV14DPwYtkBfw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="js/jquery-3.7.1.min.js"></script>
    <!--kakao api 한놈만 챙겨오기-->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9ba1ee8768e59dc81c31a27c0e72ea4a&libraries=services"></script>
</head>
<body>
    <div class="wrapper">
        <!-- Header -->
        <header>
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <!-- Brand -->
                    <a href="#" class="navbar-brand d-flex align-items-center gasoek-one-regular me-4 link_main" style="padding: 0;">
                        <img src="img/Comma-Logo.svg" alt="Comma-Img">&nbsp;&nbsp;C O M M A
                    </a>
                    <!-- Search -->
                    <form class="d-flex" role="search" id="search-bar">
                        <input class="form-control me-2" type="search" placeholder="검색할 내용을 입력해주세요." aria-label="Search" style="width: 500px; font-size: 20px;">
                        <button class="btn btn-dark"
                        type="submit" style="width: 100px; font-size: 20px; font-weight: bold;">검색</button>
                    </form>
                    <!-- Menu -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto" style="font-size: 20px; font-weight: bold; display: flex; gap: 30px;">
                            <li class="nav-item" style="width: 150px;">
                                <a class="nav-link link_map" href="#" style="text-align: center;">여행정보</a>
                            </li> 
                            <li class="nav-item" style="width: 150px;">
                                <a class="nav-link link_board"  href="#" style="text-align: center;">카드 게시판</a>
                            </li>
                            <li class="nav-item" style="width: 150px;">
                                <a class="nav-link link_my_landing" href="#" style="text-align: center;">마이페이지</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <!-- Contents -->
        <div class="container-fluid">
            <div class="content">
                <!-- Sidebar script로 요소 조정 -->
                <div class="sidebar navbar collapsed-background" id="main_sideBar" style="height: 400px;"  >
                    <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-content">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <ul class="navbar-nav ms-auto collapse" style="gap: 30px;" id="navbar-content">
                        <li class="nav-item" id="nav-item-1">
                            <a class="nav-link"  href="#">
                                <i class="menu-icon fas fa-plane"></i>
                                개인정보 수정
                            </a>
                        </li>
                        <li class="nav-item" id="nav-item-2">
                            <a class="nav-link" href="#" style="color: #FF6B00;">
                                <i class="menu-icon fas fa-credit-card"></i>
                                게시글
                            </a>
                        </li>
                        <li class="nav-item" id="nav-item-3">
                            <a class="nav-link"  href="#">
                                <i class="menu-icon fas fa-user"></i>
                                여행기록
                            </a>
                        </li>
                        <li class="nav-item" id="nav-item-4">
                            <a class="nav-link"  href="#">
                                <i class="menu-icon fas fa-user"></i>
                                회원탈퇴
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- current -->
                <div id="currentContent" style="width: 100%; height: 1100px;">
                </div>
            </div>
        </div>
        <!-- Footer -->
        <footer class="bg-dark py-3">
            <div class="container" style="font-weight: bold;">
                <span>&copy; 2024 <span style="color: #FF6B00;">COMMA</span></span>
            </div>
        </footer>
    </div>
</body>
<script>
    $(document).ready(function(){
        //임시용 로그인 상태저장 

         link_dict ={
            login:'html/Login-Joining-Page.html',
            my_landing:'html/My-Page-Landing.html',
            my_board:'html/My-Page-Board.html',
            my_withdraw:'html/My-Page-Withdrawal.html',
            board:'html/board.html',
            map : 'html/map.html',
            main: 'html/main.html',
            test :'#' 
         }
         
         nevbar_dict ={
            login: {texts:[], links:[]},
            board:{texts:['내 개시글 보기','글쓰기'], links:[]},
            map: {texts:[], links:[]},
            my: {texts:['개인정보 수정','게시글','여행기록','회원탈퇴'],links:['my_landing','my_board','my_withdraw','my_withdraw']},
            main: {texts:['여행정보','카드게시판','마이페이지'],links:['map','board','my_landing']}
         }
         

         let doing = false //에니메이션 작동중인지 확인용
                           //현재 contnent 확인

         const link_animation = function(mode) {
             if(doing == true)
               return
             doing = true    
             // create a new div for the new content
             let newContent = $("<div id='currentContent'></div>");
             let newContent_html  =link_dict[mode]
              // animate the old content to the left
             $("#currentContent").animate({left: "-100%"}, 700, function() {
                     // remove the old content after the animation
                     $(this).remove();
                     // load new content into the new div
                     newContent.load( newContent_html , function() {
                         $(".content").append(newContent);
                         // animate the new content from the right to the center
                         newContent.css({ position: 'absolute',top: '0%',left: '100%',width: '100%',height: '100%'}).animate({left: "0%"}, 700, function() {
                         // set the new content div as the current content
                         changeSideBar(mode)
                         

                         doing = false
                        });

                     });
              });
         }
         
         const toggleSidebar = function () {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('expanded');
            sidebar.classList.toggle('collapsed-background');
          }
         
         const changeSideBar = function(mode) {
           if(mode == 'login'  ){
             $('#main_sideBar').css('opacity' ,'0%')
           }
           else{
            if(mode.indexOf('my') != -1)
             mode = 'my'

            let i = 1
            nevbar_dict[mode].texts.forEach(navText => {
                $(`#nav-item-${i} a`).text(navText)
                i+=1
            });


            let j = 1
            for (let index = 0; index < 4; index++) {
                $(`#nav-item-${j} a`).off('click')
            }

            nevbar_dict[mode].links.forEach(navlink => {

                $(`#nav-item-${j} a`).off('click').on('click',()=>{link_animation(navlink)})
                j+=1
            });
          

            $('#main_sideBar').css('opacity' ,'100%')
           }

         }
         
    
         
         //링크별 어디로
         //이벤트 작종 중인지
         // load content
         link_animation('login')
         $('.link_map').on('click',()=>{link_animation('map')})
         $('.link_board').on('click',()=>{link_animation('board')})
         $('.link_my_landing').on('click', ()=>{link_animation('my_landing')})
         $('.link_main').on('click', ()=>{link_animation('main')})
         $('#main_sideBar').on('click', toggleSidebar)


    })
</script>
</html>